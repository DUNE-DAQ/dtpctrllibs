/**
 * @file FelixCardController.hpp FELIX card controller DAQ Module
 *
 * This is part of the DUNE DAQ , copyright 2020.
 * Licensing/copyright details are in the COPYING file that you should have
 * received with this code.
 */

#ifndef DTPLIBS_PLUGINS_DTPCONTROLLER_HPP_
#define DTPLIBS_PLUGINS_DTPCONTROLLER_HPP_

//from dtpcontrols
#include "dtpcontrols/DTPPodNode.hpp"

// from appfwk
#include "appfwk/app/Nljs.hpp"
#include "appfwk/cmd/Nljs.hpp"
#include "appfwk/cmd/Structs.hpp"
#include "appfwk/DAQModule.hpp"

#include <memory>
#include <string>

namespace dunedaq {
  namespace dtplibs {

    class DTPController : public dunedaq::appfwk::DAQModule
    {
    public:
      explicit DTPController(const std::string& name);

      DTPController(const DTPController&) = delete; ///< DTPController is not copy-constructible
      DTPController& operator=(const DTPController&) = delete; ///< DTPController is not copy-assignable
      DTPController(DTPController&&) = delete;            ///< DTPController is not move-constructible
      DTPController& operator=(DTPController&&) = delete; ///< DTPController is not move-assignable

      void init(const data_t&) override;

    private:

      // Commands
      void do_configure(const data_t& args);
      void get_info(opmonlib::InfoCollector& ci, int level);

      // FELIX Cards
      std::unique_ptr<dtpcontrols::DTPPodNode> m_dtp_pod;
    };

  } // namespace dtplibs
} // namespace dunedaq

#endif // DTPLIBS_PLUGINS_DTPCONTROLLER_HPP_
